
// source\data\settings.js
enyo.kind({name:"gopro.settings",statics:{debug:!0,controlsSkipToNextVideo:!0,useSampleVideos:!0,sampleVideosAreLocal:!1,sampleVideos:["https://d1lcg0vci8qqw3.cloudfront.net/H8A7BUWZ/OK9WWYNRXA65/m3u8/OK9WWYNRXA65.m3u8","https://d1lcg0vci8qqw3.cloudfront.net/H8A7BUWZ/JE67SX8MXZYS/m3u8/JE67SX8MXZYS.m3u8","https://d1lcg0vci8qqw3.cloudfront.net/H8A7BUWZ/VB9RY5BO2JQE/m3u8/VB9RY5BO2JQE.m3u8"],sampleVideoHash:{fake:"no-url"}}});

// source\data\data.js
enyo.kind({name:"gopro.PlaylistInfoCollection",kind:"enyo.Collection",model:"gopro.PlaylistInfoModel",url:"https://api.gopro.com/v1/channels/xbox-one/playlists.json",parse:function(t){return t.playlists}}),enyo.kind({name:"gopro.PlaylistInfoModel",kind:"enyo.Model",url:"https://api.gopro.com/v1/channels/xbox-one/playlists.json",parse:function(t){for(var e in t.thumbnail.snapview_image)t["thumbnail_snapviewImage_"+e]=t.thumbnail.snapview_image[e];for(var e in t.thumbnail)t["thumbnail_"+e]=t.thumbnail[e],delete t.thumbnail[e];return delete t.thumbnail,t.videoCountDisplay=t.video_count+" videos",t}}),enyo.kind({name:"gopro.Playlist",kind:"enyo.Collection",model:"gopro.VideoClip",events:{onDidFetchRecords:""},getUrl:function(){return this.link},didFetch:function(t){this.doDidFetchRecords(t)}}),enyo.kind({name:"gopro.VideoClip",kind:"enyo.Model",parse:function(t){for(var e in t.thumbnail.snapview_image)t["thumbnail_snapviewImage_"+e]=t.thumbnail.snapview_image[e];for(var e in t.thumbnail)t["thumbnail_"+e]=t.thumbnail[e],delete t.thumbnail[e];return delete t.thumbnail,t.video_link=t.video.link,delete t.video,t}});

// source\views\playlistGrid.js
enyo.kind({name:"gopro.PlaylistGridPanel",kind:"moon.Panel",classes:"playlist-grid",title:"Playlists",smallHeader:!0,autoNumber:!1,headerBackgroundSrc:"assets/gopro_logo.svg",headerBackgroundPosition:"center left",headerOptions:{classes:"gopro-header"},components:[{kind:"FittableColumns",fit:!0,components:[{name:"gridList",kind:"moon.DataGridList",fit:!0,spacing:20,minWidth:450,minHeight:256,selection:!0,events:{onPlaylistGridSelectedChanged:""},scrollerOptions:{kind:"moon.Scroller",vertical:"scroll",horizontal:"hidden",spotlightPagingControls:!0},components:[{kind:"gopro.PlaylistImageItem"}],selectedChanged:function(t,e){this.doPlaylistGridSelectedChanged(e)}}]}],bindings:[{from:".playlists.records",to:".$.dataList.collection"},{from:".playlists",to:".$.gridList.collection"},{from:".$.selectionToggle.value",to:".$.gridList.selection"},{from:".$.multiSelectToggle.value",to:".$.gridList.multipleSelection"}],create:function(){this.inherited(arguments),this.set("playlists",new gopro.PlaylistInfoCollection),this.get("playlists").fetch()}}),enyo.kind({name:"gopro.PlaylistImageItem",kind:"moon.GridListImageItem",mixins:["moon.SelectionOverlaySupport"],useCaption:!0,useSubCaption:!1,imageSizing:"cover",bindings:[{from:".model.link_text",to:".caption"},{from:".model.videoCountDisplay",to:".subCaption"},{from:".model.thumbnail_default",to:".source"}]});

// source\views\videoClipGrid.js
enyo.kind({name:"gopro.VideoClipGridPanel",kind:"moon.Panel",classes:"video-clip-grid",smallHeader:!0,headerOptions:{classes:"gopro-header"},published:{link:"",playlistTitle:"",playlist:null},components:[{kind:"FittableColumns",fit:!0,components:[{name:"gridList",kind:"moon.DataGridList",fit:!0,spacing:20,minWidth:300,minHeight:174,selection:!0,events:{onVideoClipGridSelectedChanged:""},scrollerOptions:{kind:"moon.Scroller",vertical:"scroll",horizontal:"hidden",spotlightPagingControls:!0},components:[{kind:"gopro.VideoClipImageItem"}],selectedChanged:function(t,e){this.doVideoClipGridSelectedChanged(e)}}]}],bindings:[{from:".playlistTitle",to:".title"},{from:".playlist.records",to:".$.dataList.collection"},{from:".playlist",to:".$.gridList.collection"},{from:".$.selectionToggle.value",to:".$.gridList.selection"},{from:".$.multiSelectToggle.value",to:".$.gridList.multipleSelection"}],create:function(){this.inherited(arguments),this.set("playlist",new gopro.Playlist),this.playlist.store.ignoreDuplicates=!0},linkChanged:function(){this.getData(this.link)},getData:function(t){var e=new enyo.Ajax({url:t,method:"GET",handleAs:"json"});e.response(enyo.bind(this,"processResponse")),e.go({})},processResponse:function(t,e){if(e){if(gopro.settings.useSampleVideos)for(var i=0,n=e.length;n>i;i++)e[i].video.link=this._demoGetLocalVideo(i,e);this.playlist.removeAll(),this.playlist.merge(e),gopro.settings.debug&&enyo.log(this.playlist.records)}},_demoGetLocalVideo:function(t,e){var i=gopro.settings.sampleVideoHash[""+e[t].id]||gopro.settings.sampleVideos[t%gopro.settings.sampleVideos.length],n=gopro.settings.sampleVideosAreLocal?"assets/sampleVideos/":"",o=n+i;return o}}),enyo.kind({name:"gopro.VideoClipImageItem",kind:"moon.GridListImageItem",mixins:["moon.SelectionOverlaySupport"],useCaption:!0,useSubCaption:!1,imageSizing:"cover",bindings:[{from:".model.title",to:".caption"},{from:".model.videoCountDisplay",to:".subCaption"},{from:".model.thumbnail_default",to:".source"}]});

// source\views\videoPlayer.js
enyo.kind({name:"gopro.VideoPlayer",kind:"moon.VideoPlayer",autoShowOverlay:!0,autoplay:!1,showJumpControls:!0,jumpStartEnd:!0,showFFRewindControls:!0,published:{link:"",playlist:null,currentVideoIndex:-1},events:{onPlaylistComplete:""},handlers:{onended:"onVideoEnded",onPlay:"onVideoStart"},infoComponents:[{kind:"moon.VideoInfoBackground",orient:"left",background:!0,fit:!0,components:[{kind:"moon.ChannelInfo",classes:"moon-2h gopro-channel-info",components:[{kind:"Image",src:"assets/gopro.png",classes:"gopro-player-channelinfo-image"},{name:"infoIcon",classes:"moon-video-player-info-redicon "}]},{name:"headerInfo",kind:"moon.VideoInfoHeader"}]}],bindings:[{from:".currentVideoClip.video_link",to:".src"},{from:".currentVideoClip.title",to:".$.headerInfo.subTitle"},{from:".currentVideoClip.description",to:".$.headerInfo.description"},{from:".infoIconText",to:".$.infoIcon.content"}],constructor:function(){this.inherited(arguments)},create:function(){this.inherited(arguments)},onVideoStart:function(){},onVideoEnded:function(){enyo.log("video ended"),this.set("currentVideoIndex",this.currentVideoIndex+1)},currentVideoIndexChanged:function(){this.currentVideoIndex>-1&&(this.currentVideoIndex<this.playlist.length?(this.set("currentVideoClip",this.playlist.at(this.currentVideoIndex)),this.set("infoIconText",this.currentVideoClip.attributes.vertical),this.play()):this.doPlaylistComplete())},getDurationDisplay:function(){var t=this.$.video.getDuration(),e=Math.floor(t/60),n=Math.round(60*(t/60-e)),i=e+":"+n;return i},playlistIsFetchingChanged:function(t){enyo.log("playlistIsFetching changed from"+t+" to "+this.playlistIsFetching)}});

// source\views\views.js
enyo.kind({name:"myapp.MainView",pattern:"activity",classes:"moon enyo-fit",handlers:{onPlaylistGridSelectedChanged:"playlistGridSelectedChanged",onVideoClipGridSelectedChanged:"videoClipGridSelectedChanged"},components:[{kind:"Signals",onPanelsShown:"panelsShown",onPanelsHidden:"panelsHidden"},{useHandle:!0,name:"player",kind:"gopro.VideoPlayer"},{name:"panels",kind:"moon.Panels",pattern:"activity",classes:"enyo-fit",useHandle:!0,components:[{kind:"gopro.PlaylistGridPanel"},{name:"videoClipGrid",kind:"gopro.VideoClipGridPanel"}]}],rendered:function(){this.inherited(arguments),enyo.Spotlight.spot(this.$.panels)},create:function(){this.inherited(arguments),this.anim=this.$.panels.getAnimator()},playlistGridSelectedChanged:function(t,e){var n=e.previous;n?(enyo.log(n),this.$.videoClipGrid.setLink(n.link),this.$.videoClipGrid.setPlaylistTitle(n.link_text)):(enyo.log("No item"),enyo.log(e)),this.$.panels.setIndex(1)},videoClipGridSelectedChanged:function(t,e){var n=this.$.videoClipGrid.playlist.indexOf(e);console.log("Item "+n+" selected"),n>-1?(this.$.player.setPlaylist(this.$.videoClipGrid.playlist),this.$.player.setCurrentVideoIndex(-1),this.$.player.setCurrentVideoIndex(n),this.$.panels.hide()):enyo.log("Video clip index is < 0.")},panelsShown:function(){enyo.log("onPanelsShown"),this.$.player.pause()},panelsHidden:function(){enyo.log("onPanelsHidden"),this.$.player.play()}});

// source\app.js
enyo.kind({name:"myapp.Application",kind:"enyo.Application",view:"myapp.MainView"}),enyo.ready(function(){new myapp.Application({name:"app"})});
